#!/usr/bin/env python

"""
Postprocessing script for pretty-printing the data stored in ppdata.csv.
"""

from fenics import Table, info

# Read from file
text = open("ppdata.csv").read()
keys = text.split("\n")[0].split(",")
vals = text.split("\n")[1].split(",")

# Pretty-print table
t = Table("Parameter")
d = {}
for k, v in zip(keys, vals):
    t.set(k, "value", v)
    d[k] = v
info(t, True)

# Figure out torus geometry
R = float(d["r_peak"])
r0 = float(d["r_inner"])
r1 = float(d["r_outer"])
r = max(abs(R - r0), abs(R - r1))
print ""
print "Recommended values for torus geometry"
print "-------------------------------------"
print ""
print "R = %.3g" % R
print "r = %.3g" % r
print ""
print "%.3g %.3g" % (R, r)
